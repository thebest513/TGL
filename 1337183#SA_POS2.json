{
    "1337183#SA_POS2": {
        "Type": "Folder",
        "ControlmServer": "CTM",
        "Description": "1337183#SA_POS2",
        "ActiveRetentionPolicy": "CleanEndedOK",
        "DaysKeepActive": "Forever",
        "AdjustEvents": true,
        "Confirm": true,
        "OrderMethod": "Manual",
        "Application": "eBao",
        "CreatedBy": "GSS",
        "Variables": [
            {
                "processDate": "2022-04-28"
            },
            {
                "ip": "10.67.70.16:9081"
            },
            {
                "partial_success": "/ctm/life/partial_success.py"
            }
        ],
        "When": {
            "ToTime": ">",
            "RuleBasedCalendars": {
                "Included": [
                    "TWM00",
                    "TWM01S",
                    "TWY05",
                    "TWCAD",
                    "TWY02",
                    "TWM02S",
                    "TWY04",
                    "TWM15",
                    "TWW01",
                    "TWM10",
                    "TWY07",
                    "TWW07",
                    "TWY00",
                    "TWM20",
                    "TWDWD",
                    "TWY06",
                    "TWDAD",
                    "TWM02",
                    "TWM01L",
                    "TWY03",
                    "TWM05",
                    "TWQ11L",
                    "TWM28",
                    "TWM01",
                    "TWY01",
                    "TWH301"
                ]
            }
        },
        "1337122#保全_網路契變_分片": {
            "Type": "Job:Command",
            "FileName": "POS",
            "Description": "1337122#保全_網路契變_分片",
            "DaysKeepActive": "Forever",
            "Application": "eBao",
            "CreatedBy": "LynKuo_002591",
            "Host": "CTMAG",
            "RunAs": "life",
            "Command": "curl -H \"Content-Length: 250\" -H \"Content-Type: application/json\" -H \"Accept: application/json\" http://%%ip/ls/rest/batch/start.d -X POST -d \"{\\\"jobId\\\":1337122, \\\"processDate\\\":\\\"%%processDate\\\", \\\"dueDate\\\":\\\"1900-01-01\\\"}\" -v -sS",
            "PostCommand": "/ctm/ctmsvr/bmcpython/bmcpython_V2/python %%partial_success %%ORDERID %%RUNCOUNT %%tolerance %%JOBNAME",
            "RunAsDummy": true,
            "Variables": [
                {
                    "tolerance": "10"
                }
            ],
            "Rerun": {
                "Units": "Minutes",
                "Every": "2"
            },
            "When": {
                "WeekDays": [
                    "NONE"
                ],
                "MonthDays": [
                    "ALL"
                ],
                "ToTime": ">",
                "DaysRelation": "OR",
                "RuleBasedCalendars": {
                    "Relationship": "AND",
                    "Included": [
                        "TWDAD"
                    ]
                }
            },
            "IfBase:Folder:Output_0": {
                "Type": "If:CompletionStatus",
                "CompletionStatus": "ANY",
                "Action:SetToNotOK_0": {
                    "Type": "Action:SetToNotOK"
                }
            },
            "IfBase:Folder:Output_1": {
                "Type": "If:Output",
                "Code": "*\"status\":107*",
                "Action:SetToOK_0": {
                    "Type": "Action:SetToOK"
                }
            },
            "IfBase:Folder:Output_2": {
                "Type": "If:Output",
                "Code": "*\"status\":105*",
                "Action:SetToNotOK_0": {
                    "Type": "Action:SetToNotOK"
                },
                "DoNotify_0": {
                    "Type": "Action:Notify",
                    "Urgency": "Urgent",
                    "Message": "%%JOBNAME %%$ODATE 105 execution failure."
                },
                "Mail_1": {
                    "Type": "Action:Mail",
                    "Subject": "%%JOBNAME %%$ODATE 105 execution failure.",
                    "Message": "%%JOBNAME %%$ODATE 105 execution failure.",
                    "Urgency": "Urgent",
                    "To": "tglop@transglobe.com.tw;ameryyen@transglobe.com.tw;LynKuo@transglobe.com.tw"
                }
            },
            "IfBase:Folder:Output_3": {
                "Type": "If:Output",
                "Code": "*\"status\":223*",
                "Action:SetToNotOK_0": {
                    "Type": "Action:SetToNotOK"
                },
                "DoNotify_0": {
                    "Type": "Action:Notify",
                    "Urgency": "Urgent",
                    "Message": "%%JOBNAME %%$ODATE 223 STOP"
                },
                "Mail_1": {
                    "Type": "Action:Mail",
                    "Subject": "%%JOBNAME %%$ODATE 223 STOP",
                    "Message": "%%JOBNAME %%$ODATE 223 STOP",
                    "Urgency": "Urgent",
                    "To": "tglop@transglobe.com.tw;ameryyen@transglobe.com.tw;LynKuo@transglobe.com.tw"
                }
            },
            "IfBase:Folder:Output_4": {
                "Type": "If:Output",
                "Code": "*Attention! Fail count exceeds tolerance*",
                "Action:SetToNotOK_0": {
                    "Type": "Action:SetToNotOK"
                },
                "DoNotify_0": {
                    "Type": "Action:Notify",
                    "Urgency": "Urgent",
                    "Message": "%%JOBNAME %%$ODATE 106 fail count over %%tolerance"
                },
                "Mail_1": {
                    "Type": "Action:Mail",
                    "Subject": "%%JOBNAME %%$ODATE 106 fail count over %%tolerance",
                    "Message": "%%JOBNAME %%$ODATE 106 fail count over %%tolerance",
                    "Urgency": "Urgent",
                    "To": "tglop@transglobe.com.tw;ameryyen@transglobe.com.tw;LynKuo@transglobe.com.tw"
                }
            },
            "IfBase:Folder:Output_5": {
                "Type": "If:Output",
                "Code": "*Fail count within tolerance*",
                "Action:SetToOK_0": {
                    "Type": "Action:SetToOK"
                },
                "DoNotify_0": {
                    "Type": "Action:Notify",
                    "Urgency": "Urgent",
                    "Message": "%%JOBNAME %%$ODATE 106 fail count under %%tolerance"
                },
                "Mail_1": {
                    "Type": "Action:Mail",
                    "Subject": "%%JOBNAME %%$ODATE 106 fail count under %%tolerance",
                    "Message": "%%JOBNAME %%$ODATE 106 fail count under %%tolerance",
                    "Urgency": "Urgent",
                    "To": "tglop@transglobe.com.tw;ameryyen@transglobe.com.tw;LynKuo@transglobe.com.tw"
                }
            },
            "IfBase:Folder:Output_6": {
                "Type": "If:Output",
                "Code": "*\"status\":995*",
                "Action:SetToNotOK_0": {
                    "Type": "Action:SetToNotOK"
                },
                "DoNotify_0": {
                    "Type": "Action:Notify",
                    "Urgency": "Urgent",
                    "Message": "%%JOBNAME %%$ODATE 995 error in submission"
                },
                "Mail_1": {
                    "Type": "Action:Mail",
                    "Subject": "%%JOBNAME %%$ODATE 995 error in submission",
                    "Message": "%%JOBNAME %%$ODATE 995 error in submission",
                    "Urgency": "Urgent",
                    "To": "tglop@transglobe.com.tw;ameryyen@transglobe.com.tw;LynKuo@transglobe.com.tw"
                }
            },
            "IfBase:Folder:Output_7": {
                "Type": "If:Output",
                "Code": "*\"status\":996*",
                "Action:SetToOK_0": {
                    "Type": "Action:SetToOK"
                },
                "DoNotify_0": {
                    "Type": "Action:Notify",
                    "Urgency": "Urgent",
                    "Message": "%%JOBNAME %%$ODATE 996 write t_batch_job.due_time error, please data patch the current data"
                },
                "Mail_1": {
                    "Type": "Action:Mail",
                    "Subject": "%%JOBNAME %%$ODATE 996 t_batch_job.due_time",
                    "Message": "%%JOBNAME %%$ODATE 996 write t_batch_job.due_time error, please data patch the current data",
                    "Urgency": "Urgent",
                    "To": "tglop@transglobe.com.tw;ameryyen@transglobe.com.tw;LynKuo@transglobe.com.tw"
                }
            },
            "IfBase:Folder:Output_8": {
                "Type": "If:Output",
                "Code": "*\"status\":997*",
                "Action:SetToNotOK_0": {
                    "Type": "Action:SetToNotOK"
                },
                "DoNotify_0": {
                    "Type": "Action:Notify",
                    "Urgency": "Urgent",
                    "Message": "%%JOBNAME %%$ODATE 997 not started"
                },
                "Mail_1": {
                    "Type": "Action:Mail",
                    "Subject": "%%JOBNAME %%$ODATE 997 not started",
                    "Message": "%%JOBNAME %%$ODATE 997 not started",
                    "Urgency": "Urgent",
                    "To": "tglop@transglobe.com.tw;ameryyen@transglobe.com.tw;LynKuo@transglobe.com.tw"
                }
            },
            "IfBase:Folder:Output_10": {
                "Type": "If:Output",
                "Code": "*\"status\":999*",
                "Action:SetToNotOK_0": {
                    "Type": "Action:SetToNotOK"
                },
                "DoNotify_0": {
                    "Type": "Action:Notify",
                    "Urgency": "Urgent",
                    "Message": "%%JOBNAME %%$ODATE 999 unknown exception"
                },
                "Mail_1": {
                    "Type": "Action:Mail",
                    "Subject": "%%JOBNAME %%$ODATE 999 unknown exception",
                    "Message": "%%JOBNAME %%$ODATE 999 unknown exception",
                    "Urgency": "Urgent",
                    "To": "tglop@transglobe.com.tw;ameryyen@transglobe.com.tw;LynKuo@transglobe.com.tw"
                }
            },
            "IfBase:Folder:Output_11": {
                "Type": "If:NumberOfFailures",
                "NumberOfFailures": "10",
                "Action:StopCyclicRun_0": {
                    "Type": "Action:StopCyclicRun"
                }
            },
            "IfBase:Folder:Output_98": {
                "Type": "If:CompletionStatus",
                "CompletionStatus": "NOTOK",
                "Mail_1": {
                    "Type": "Action:Mail",
                    "Subject": "%%JOBNAME %%$ODATE failed",
                    "Message": "%%JOBNAME %%$ODATE failed",
                    "Urgency": "Urgent",
                    "To": "tglop@transglobe.com.tw;ameryyen@transglobe.com.tw;LynKuo@transglobe.com.tw"
                }
            }
        }
    }
}